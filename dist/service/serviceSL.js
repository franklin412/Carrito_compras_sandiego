sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,n,r,t){"use strict";var a;return{setManifestObject:function(e){a=e.getOwnerComponent().getManifestObject()},onAddDescuento:function(e,n){return new Promise(function(r,t){var a=n+"sb1sl/BTP_RESERVA";var s={Code:e.Code,U_ItemCode:e.ItemCode,U_WhsCode:e.WarehouseCode,U_CantReserva:e.Quantity};$.ajax({type:"POST",dataType:"json",url:a,data:JSON.stringify(s),success:function(e){r(e)},error:function(e){t(e)}})})},onObtenerDescuentoReserva:function(e,n){return new Promise(function(r,t){var a=e+"sb1sl/BTP_RESERVA?$filter=U_ItemCode eq '"+n.ItemCode+"' and U_WhsCode eq '"+n.WarehouseCode+"'";$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){r(e.value)},error:function(e){t(e)}})})},onEditDescuento:function(e,n){var r={U_ItemCode:n.U_ItemCode,U_WhsCode:n.U_WhsCode,U_CantReserva:n.U_CantReserva};return new Promise(function(t,a){var s=e+"sb1sl/BTP_RESERVA('"+n.Code+"')";$.ajax({type:"PATCH",dataType:"json",url:s,data:JSON.stringify(r),success:function(e){t(e)},error:function(e){a(e)}})})},onObtenerAlternativosDetalle:function(e,n){var r=this;return new Promise(function(r,t){var a=n+"sb1sl/Items('"+e+"')";$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){e.ItemWarehouseInfoCollection.forEach(function(e){e.InStock2=e.InStock});r(e)},error:function(e){t(e.responseJSON)}})})},onConsultaServiceLayer:function(e,n){var r=this;return new Promise(function(r,t){var a=e+"sb1sl/"+n;$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){r(e.value)},error:function(e){t(e.responseJSON)}})})},onConsultaServiceLayerIdentificador:function(e,n,r){var t=this;return new Promise(function(n,r){var t=e+"sb1sl/U_ACTIVOS";$.ajax({type:"GET",dataType:"json",url:t,headers:{Prefer:"odata.maxpagesize=10000"},success:function(e){n(e.value)},error:function(e){r(e.responseJSON)}})})},onConsultaIAS:function(e,n,r){var t=this,a;if(r==="Group"){a="groups.display";e="Grp_Aprobar_Reserva"}else{a="emails.value"}return new Promise(function(r,t){var s=n+"iasscim/Users?filter="+a+' eq "'+e+'"';$.ajax({type:"GET",contentType:"application/scim+json",url:s,success:function(e){r(e)},error:function(e){t(e.responseJSON)}})})},onObtenerAreas:function(e,n){return new Promise(function(r,t){var a=e+"sb1sl/Area('"+n+"')";$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){r(e)},error:function(e){t(e.responseJSON)}})})},getCentrosCosto:function(e,n){var r=this;return new Promise(function(r,t){var a=e+"sb1sl/ProfitCenters?$filter= U_Area eq '"+n+"'";$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){r(e.value)},error:function(e){r(e)}})})},consultaEmpleado:function(e,n,r){var t=this,a;return new Promise(function(e,t){var a=n+"sb1sl/"+r;$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(n){e(n.value)},error:function(e){t(e.responseJSON)}})})},consultaProjects:function(e,n){var r=this,t;var a=n.getUTCFullYear()+"-"+(n.getUTCMonth()+1).toString().padStart(2,"0")+"-"+n.getDate().toString().padStart(2,"0");return new Promise(function(n,r){var t=e+"sb1sl/Projects?$filter=ValidFrom lt '"+a+"' and ValidTo gt '"+a+"'";$.ajax({type:"GET",dataType:"json",url:t,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){n(e.value)},error:function(e){r(e.responseJSON)}})})},onObtenerAlmacen:function(e,n){var r=this,t;return new Promise(function(r,t){var a=n+"sb1sl/Warehouses('"+e+"')";$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){r(e)},error:function(e){t(e.responseJSON)}})})},onObtenerALMXTIPO:function(e,n,r){var t=this,a;return new Promise(function(e,t){var a=n+"sb1sl/"+r;$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(n){e(n.value)},error:function(e){t(e.responseJSON)}})})},onObtenerUsersIASxTipo:function(e,n){var r=this;return new Promise(function(e,r){var t=n+"iasscim/Users";$.ajax({type:"GET",contentType:"application/scim+json",url:t,success:function(n){e(n)},error:function(e){r(e.responseJSON)}})})},consultaAccountRulesProject:function(e){var n=this,r;return new Promise(function(n,r){var t=e+"sb1sl/GLAccountAdvancedRules?$filter=Code eq 'PROYECTOS'";$.ajax({type:"GET",dataType:"json",url:t,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){e.value.sort(function(e,n){return parseInt(n.PeriodName)-parseInt(e.PeriodName)});n(e.value)},error:function(e){r(e.responseJSON)}})})},consultaGeneralB1SL:function(e,n,r,t){var a=this,s;return new Promise(function(r,t){var a=e+"sb1sl"+n;$.ajax({type:"GET",dataType:"json",url:a,headers:{Prefer:"odata.maxpagesize=1000"},success:function(e){r(e)},error:function(e){t(e)}})})},onPostGeneralDataServiceLayer:function(e,n,r,t){return new Promise(function(t,a){var s=e+"sb1sl"+n;$.ajax({type:"POST",dataType:"json",url:s,data:r?JSON.stringify(r):null,success:function(e){t(e)},error:function(e){a(e)}})})},onPatchGeneralDataServiceLayer:function(e,n,r,t){return new Promise(function(t,a){var s=e+"sb1sl"+n;$.ajax({type:"PATCH",dataType:"json",url:s,data:r?JSON.stringify(r):null,success:function(e){t(e)},error:function(e){a(e)}})})}}});